# 18. 경계 해부학
시스템 아키텍처는 일련의 소프트웨어 컴포넌트와 그 컴포넌트들을 분리하는 경계에 의해 정의된다. 이러한 경계는 다양한 형태로 나타난다.

## 경계 횡단하기
'런타임에 경계를 횡단한다' 함은 그저 경계 한쪽에 있는 기능에서 반대편 기능을 호출하여 데이터를 전달하는 일에 불과하다. 
 - 왜냐하면 소스 코드 모듈 하나가 변경되면, 이에 의존하는 다른 소스 코드 모듈도 변경하거나, 다시 컴파일해서 새로 배포해야 할지도 모르기 때문이다.
 - 경계는 이러한 변경이 전파되는 것을 막는 방화벽을 구축하고 관리하는 수단으로써 존재한다.

## 두려운 단일체
아키텍처 경계 중에서 가장 단순하며 가장 흔한 형태는 물리적으로 엄격하게 구분되지 않는 형태다. 
이전장에서 말했던 소스 수준 분리 모드이기도 하며 배포 관점에서 보면 이는 소위 단일체라고 불리는 단일 실행 파일이다.
가장 단순한 형태의 경계 횡단은 저수준 클라이언트에서 고수준 서비스로 향하는 함수 호출이다.
배포 관점에서 볼 때 경계가 드러나지 않지만 내부적으로 경계가 존재할 수 있고 그 경계를 만드는 일은 매우 가치있는 일이다.

## 배포형 프로세스
아키텍처의 경계가 물리적으로 드러난다. 가장 단순한 형태는 동적 링크 라이브러리다.
단일체와 마찬가지로 경계를 가로지르는 통신은 함수호출이므로 매우 값싸다.

## 스레드
단일체와 배포형 컴포넌트는 모두 스레드를 활용할 수 있다. 
아키텍처 경계도 아니며, 배포 단위도 아니다. 실행 계획과 순서를 체계화하는 방법에 가깝다.
모든 스레드가 하나의 컴포넌트에 포함될수도 있고, 많은 컴포넌트에 걸쳐 분산될 수도 있다.

## 로컬 프로세스
훨씬 강한 물리적 형태를 띠는 아키텍처 경계. 
명령행(terminal)이나 유사한 시스템 호출을 통해 생성된다. 
로컬 프로세스는 컴포넌트 간 의존성을 동적 다형성을 통해 관리하는 저수준 컴포넌트로 구성된다. 
소스 코드 의존성의 화살표는 항상 고수준 컴포넌트를 향한다.

## 서비스
 - 물리적인 형태를 띠는 가장 강력한 경계이다.
 - 서비스는 프로세스로, 명령행 또는 그와 동등한 시스템 호출을 통해 구동된다. 
 - 서비스는 자신의 물리적 위치에 구애받지 않는다. 
 - 서비스는 모든 통신이 네트워크를 통해 이뤄진다고 가정한다. 
 - 서비스 경계를 지나는 통신은 함수 호출에 비해 매우 느리다. 이때 발생하는 지연(latency)에 따른 문제는 고수준에서 처리할 수 있어야 한다.
 - 저수준 서비스는 고수준 서비스에 '플러그인'되어야 한다. 고수준 서비스의 소스 코드에는 저수준 서비스를 특정 짓는 어떤 물리적인 정보(예를 들면, URI)도 절대 포함해서는 안 된다.
